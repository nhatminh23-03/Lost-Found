{% extends "base.html" %}

{% block title %}Feed ‚Äî Lost &amp; Found{% endblock %}

{% block content %}
<section class="feed-header">
  <div>
    <h1>Recent Posts</h1>
    <p>Browse lost and found items reported on campus.</p>
  </div>
  <a href="{{ url_for('posts.new_post_form') }}" class="btn btn-primary btn-lg">+ Report Item</a>
</section>

{% if posts %}
  <div class="card-grid">
    {% for post in posts %}
      <a href="{{ url_for('posts.post_detail', post_id=post._id) }}" class="card">
        {% if post.image_url %}
          <img class="card-img" src="{{ post.image_url }}" alt="Photo of {{ post.item_name }}" loading="lazy" />
        {% else %}
          <div class="card-img card-img--placeholder"></div>
        {% endif %}
        <div class="card-body">
          <span class="badge badge--{{ post.type }}">{{ post.type | upper }}</span>
          <h2 class="card-title">{{ post.item_name }}</h2>
          <p class="card-meta">üìç {{ post.location }}</p>
          <p class="card-desc">{{ post.description | truncate(100) }}</p>
          <div class="card-footer">
            <time datetime="{{ post.created_at.isoformat() }}">
              {{ post.created_at.strftime("%b %d, %Y") }}
            </time>
          </div>
        </div>
      </a>
    {% endfor %}
  </div>
{% else %}
  <div class="empty-state">
    <div class="empty-state__icon">üîç</div>
    <h2>No posts yet</h2>
    <p>Be the first to report a lost or found item on campus.</p>
    <a href="{{ url_for('posts.new_post_form') }}" class="btn btn-primary">Report an Item</a>
  </div>
{% endif %}
{% endblock %}
